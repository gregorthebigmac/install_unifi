# install_unifi
Quick script to download and install unifi controlling software. Basically just asks you which Distro you have and selects the appropriate script from this page

https://community.ui.com/questions/UniFi-Installation-Scripts-or-UniFi-Easy-Update-Script-or-Ubuntu-16-04-18-04-18-10-19-04-or-Debian-/ccbc7530-dd61-40a7-82ec-22b17f027776

## Quick Explanation of Unifi

So the setup is... less than intuitive. Their documentation is written for idiots, and doesn't tell you *how* anything works, it merely tells you how to do a default setup, and even **then** it leaves much to be desired. So, here's some quick rules for setting it up.

1. You can only have ONE Unifi Controller! To people familiar with Unifi, this might sound like a no-brainer, but to someone who has never used their hard/software, there's no reason to assume this, and it should be explicitly mentioned somewhere. Having multiple controllers will break all the things, so don't do it! One controller, no matter how many APs you want to setup, unless they are on segregated networks (obviously), *then* you'll want multiple controllers.

2. Once a device (e.g. an AP) has been "adopted" (i.e. *paired*) with a controller, the controller will remember the device, and if you encounter problems so severe that the only way to fix it is to do a *hard factory reset* on the AP itself, there is a specific procedure to make sure the controller does not attempt to re-adopt the AP with the old (broken) settings you're trying to undo. That procedure is as follows:
  1. If the AP is connected to the controller via Ethernet (i.e. the LAN port on the PoE Injector is plugged into one of the controller's NICs), unplug it, and if they are connected via Wi-Fi (even indirectly), disconnect them however you see fit (ideally, just disable the controller's Wi-Fi for the duration of the reset). NOTE: Do **NOT** disconnect the PoE connection to the AP. It needs power to do the reset. If you remove *both* plugs, you just wasted the time it takes for a reboot.
  2. Once comms between the controller and the AP have been fully and completely cutoff, press and hold the reset button on the AP (next to the RJ-45 on the AP itself) until you see the LED indicator turn off. It will only turn off for a second or two before coming back on, so once you see it turn off for longer than a standard "blink" you'll know it's time to let off the button. This is typically approx. 5 seconds before the reset occurs.
  3. While you're waiting for the device to boot up (typically between 15-30 seconds), go to your controller, and click on the AP you're resetting. Go down to "Device Config" and select "Forget this device." This will (should) remove all records of the AP your controller had. The reason this factory reset fails to get controllers talking to APs so often is because the controller remembers the AP and refuses to adopt it because the settings are broken, and that's why you're doing this, right?
  4. Once the device has rebooted, the indicator LED should be solid white (maybe occasionally blinking? I can't remember). It should definitely NOT be blue! If it's blue, you did it wrong. Go back to step one, and make sure you didn't miss something.
  5. Once you've confirmed it's white (and I *think* not blinking), plug the LAN cable back into the PoE injector. The AP should be back to factory defaults now, and your controller should have no memory of the AP, and it should treat it like a brand new device. From there, you should be good to have your controller adopt it. You may also restore any previous connections you had to break in order to do the shutdown. Once it's adopted, you're good to configure the now reset AP.
3. Another not-so intuitive thing (but now makes sense, once I was told this) is that even if all of the devices involved in your setup are on the same subnet, and there is a DHCP server on said subnet, that does not *necessarily* mean every device will get DHCP, and some will have to be set manually (i.e. given static IP address(es)). I'll give an example to demonstrate:

In our sample network, we have 8 total devices. A router (also acting as DHCP server), 3 machines plugged into that router via a switch, one AP plugged into the same switch, and a laptop plugged into another AP with no physical connection to bridge these two networks together (the APs are acting as the bridge between the laptop and the rest of the network). The laptop owner, knowing they are expected to be assigned an IP by the DHCP server (the router) on the other side of the wireless bridge created by the APs, chooses to not set a static IP for their laptop and let the DHCP server dole one out to the laptop. THIS WILL NOT WORK! The laptop must have an IP in the correct subnet before it can even *talk* to the AP it's physically connected to! If not, it will just hang, and you'll sit there for minutes wondering why nothing's happening.

Alongside this, now would be a good time to remind that all APs must be connected (the first time, when doing the initial config) to a DHCP server of some kind, otherwise they will default to their fallback subnet of 192.168.1.0, and if your controller does not match their subnet, you may see it, but not be able to "adopt" it because they're on different subnets.
